version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Check versions (optional)
        - 'python3 --version'
        - 'pip3 --version'
        # Install Python dependencies
        - 'pip3 install -r requirements.txt'
    build:
      commands:
        # Run the Streamlit app on port 80
        - 'streamlit run chatbot.py'
  artifacts:
    # This is the output directory where Amplify will look for your app build. 
    # Since Streamlit apps are run directly, no actual artifacts are needed.
    baseDirectory: /  # Streamlit doesn't produce build artifacts, root directory suffices
    files:
      - '**/*'  # You can specify files, but for Streamlit, leave this as all files
  cache:
    # Caching to speed up build times (optional)
    paths:
      - node_modules/**/*  # Optional if using Node.js for frontend assets
      - ~/.cache/pip/**/*

backend:
  phases:
    preBuild:
      commands:
        - 'echo "Backend pre-build phase: no backend dependencies for Streamlit"'
    build:
      commands:
        - 'echo "Backend build phase: no backend build needed for Streamlit"'

test:
  phases:
    preTest:
      commands:
        - 'echo "No pre-tests required"'
    test:
      commands:
        - 'echo "No tests configured"'
  artifacts:
    baseDirectory: /  # Specify the root directory
    files:
      - '**/*'  # Include all files as test artifacts

customHeaders:
  # Add custom headers to the web app
  - pattern: '**/*'
    headers:
      - key: "Content-Type"
        value: "text/html; charset=UTF-8"
