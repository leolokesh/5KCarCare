version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Check versions (optional)
        - 'python3 --version'
        - 'pip3 --version'
        # Install Python dependencies
        - 'pip3 install -r requirements.txt'
    build:
      commands:
        # Run the Streamlit app on port 80 after dependencies are installed
  artifacts:
    # Since Streamlit apps run directly, no actual artifacts are needed.
    baseDirectory: /  # Specify the root directory
    files:
      - '**/*'
  cache:
    # Caching to speed up build times (optional)
    paths:
      - node_modules/**/*  # Optional if using Node.js for frontend assets
      - ~/.cache/pip/**/*

backend:
  phases:
    preBuild:
      commands:
        - 'echo "Backend pre-build phase: no backend dependencies for Streamlit"'
    build:
      commands:
        - 'echo "Backend build phase: no backend build needed for Streamlit"'

test:
  phases:
    preTest:
      commands:
        - 'echo "No pre-tests required"'
    test:
      commands:
        - 'echo "No tests configured"'
  artifacts:
    baseDirectory: /  # Specify the root directory
    files:
      - '**/*'

customHeaders:
  # Add custom headers to the web app
  - pattern: '**/*'
    headers:
      - key: "Content-Type"
        value: "text/html; charset=UTF-8"
